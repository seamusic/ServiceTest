---
globs: *.cs
---

# C# 编码标准

## 代码风格
- 使用 C# 12 语法特性（如主构造函数）
- 启用可空引用类型 (`<Nullable>enable</Nullable>`)
- 使用隐式 using 语句 (`<ImplicitUsings>enable</ImplicitUsings>`)

## 命名约定
- 类名使用 PascalCase
- 方法名使用 PascalCase
- 参数和局部变量使用 camelCase
- 私有字段使用 camelCase 或 _camelCase

## 异步编程
- 所有 gRPC 方法应使用 `async/await` 模式
- 返回类型使用 `Task<T>` 而不是 `ValueTask<T>`（除非有性能要求）
- 避免使用 `.Result` 或 `.Wait()` 阻塞异步调用

## 错误处理
- 使用适当的异常类型
- 在 gRPC 服务中抛出 `RpcException` 而不是通用异常
- 记录错误信息但不要暴露敏感信息

## 依赖注入
- 使用构造函数注入
- 在 `Program.cs` 中注册服务
- 使用接口而不是具体类进行依赖注入